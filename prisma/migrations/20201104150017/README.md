# Migration `20201104150017`

This migration has been generated by Max Streitberger at 11/4/2020, 4:00:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Vote" DROP CONSTRAINT "Vote_event_id_fkey"

ALTER TABLE "public"."Vote" DROP CONSTRAINT "vote_pk",
ADD PRIMARY KEY ("survey_id", "user_id")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201104144531..20201104150017
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Event {
   event_id                String       @id @default(cuid())
@@ -110,15 +110,14 @@
   user_id     String
   survey_id   String
   event_id    String
   voted_at    DateTime?       @default(now())
-  event       Event           @relation(fields: [event_id], references: [event_id])
   survey      Survey          @relation(fields: [survey_id], references: [survey_id])
   user        User            @relation(fields: [user_id], references: [user_id])
   answer_id   String
   answer      SurveyAnswer    @relation(fields: [answer_id], references: [answer_id])
-  @@id([survey_id, user_id, event_id])
+  @@id([survey_id, user_id])
 }
 enum EventType {
   LOCAL
```


