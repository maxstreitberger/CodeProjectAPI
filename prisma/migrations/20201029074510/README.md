# Migration `20201029074510`

This migration has been generated by Max Streitberger at 10/29/2020, 8:45:10 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Task" DROP CONSTRAINT "Task_event_id_fkey"

CREATE TABLE "public"."EventTask" (
"event_task_id" text   NOT NULL ,
"event_id" text   ,
"title" text   ,
"description" text   ,
"deadline" text   ,
"created_at" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("event_task_id")
)

DROP TABLE "public"."Task"

ALTER TABLE "public"."EventTask" ADD FOREIGN KEY("event_id")REFERENCES "public"."Event"("event_id") ON DELETE SET NULL ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201029073822..20201029074510
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model Event {
   event_id                String       @id @default(cuid())
@@ -21,9 +21,9 @@
   meeting_link            String?
   created_at              DateTime?    @default(now())
   host_id                 String?
   host                    User?        @relation(fields: [host_id], references: [user_id])
-  tasks                   Task[]
+  tasks                   EventTask[]
   joinedEvents            User_Event[]
 }
 model User {
@@ -49,9 +49,9 @@
   @@id([event_id, user_id])
 }
-model Task {
+model EventTask {
   event_task_id     String      @id @default(cuid())
   event_id          String?
   title             String?
   description       String?
```


